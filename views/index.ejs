<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Builder</title>
    <meta name="csrf-token" content="<%= csrfToken %>">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100" style="background-image: url('https://static.vecteezy.com/system/resources/previews/004/242/510/non_2x/abstract-wave-trendy-geometric-abstract-background-with-white-and-blue-gradient-vector.jpg'); background-size: cover; background-repeat: no-repeat;">
    
  <!-- Navbar -->
  <nav class="bg-blue-900 p-4 shadow-md">
    <div class="max-w-screen-xl px-16 mx-auto flex justify-between items-center">
      <h1 class="text-white text-2xl font-semibold"><a href="/" class="text-white">SiteForge</a></h1>
      <div class="flex space-x-4">
        <a href="/profile" class="text-white text-sm bg-gray-400 duration-300 ease-in-out hover:bg-blue-500 px-4 py-2 rounded">Profile</a>
        <a href="/" class="text-white  text-sm bg-gray-400 duration-300 ease-in-out hover:bg-blue-500 px-4 py-2 rounded">Build Page</a>
        <a href="/ai/page" class="text-white  text-sm bg-gray-400 duration-300 ease-in-out hover:bg-blue-500 px-4 py-2 rounded">Generate Page</a>
        <% if (user && user.role !== 'user') { %>  
          <a href="/admin" class="text-white text-sm  bg-gray-400 duration-300 ease-in-out hover:bg-blue-500 px-4 py-2 rounded">Admin</a>
        <% } %>
        <a href="/logout" class="text-white text-sm  bg-gray-400 duration-300 ease-in-out hover:bg-blue-500 px-4 py-2 rounded">Logout</a>
      </div>
    </div>
  </nav>

  <div class="max-w-screen-xl mx-auto mt-10 mb-20 px-16 p-6">
    <div class="grid grid-cols-4 gap-6">
        <!-- Sidebar Elements -->
        <div class="col-span-1 bg-white p-5 rounded-xl shadow-lg">
            <h3 class="text-xl font-bold mb-4">Elements</h3>
            <div class="space-y-2">
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="h1">Heading</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="p">Paragraph</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab border" data-type="button">Button</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="div">Div</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="section">Section</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="ul">Unordered List</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="ol">Ordered List</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="input">Input Field</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab border" data-type="select">Drop Down</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="textarea">Text Area</div>
            </div>
        </div>
        
        <!-- Builder Area -->
        <div class="col-span-3 bg-gray-100 p-6 rounded-xl shadow-lg min-h-[500px] flex flex-col items-center justify-center" id="builderArea">
            <h3 class="text-xl font-semibold text-gray-400">Drag and drop elements here</h3>
        </div>
    </div>

    <!-- Style Editor Panel -->
    <div class="fixed top-10 right-10 bg-white p-5 shadow-lg rounded-xl hidden" id="stylePanel">
        <h3 class="text-lg font-bold mb-4">Style Editor</h3>
        <label class="block mb-2">Text Color: <input type="color" id="colorPicker" class="ml-2"></label>
        <label class="block mb-2">Background: <input type="color" id="bgColorPicker" class="ml-2"></label>
        <label class="block mb-2">Font Size: <input type="number" id="fontSize" class="border p-1 w-full"></label>
        <label class="block mb-2">Padding: <input type="number" id="padding" class="border p-1 w-full"></label>
        <label class="block mb-2">Margin: <input type="number" id="margin" class="border p-1 w-full"></label>
        <label class="block mb-2">Text Align:
            <select id="textAlign" class="border p-1 w-full">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
            </select>
        </label>
        <label class="block mb-2">Flex Direction:
            <select id="flexDirection" class="border p-1 w-full">
                <option value="row">Row</option>
                <option value="column">Column</option>
            </select>
        </label>
    </div>

    <!-- Save Button -->
    <button id="saveBtn" class="mt-6 bg-teal-600 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-teal-700 block mx-auto w-1/3 border">Save Page</button>
    </div>

    <footer class="bg-blue-900 p-4 shadow-md text-center text-white fixed bottom-0 w-full mt-28">
        &#169; SiteForge
    </footer>
    
    <script src="/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const panel = document.getElementById("stylePanel");
            const dragBtn = document.getElementById("drag");
        
            let offsetX, offsetY, isDragging = false;
        
            dragBtn.addEventListener("mousedown", (e) => {
                isDragging = true;
                offsetX = e.clientX - panel.getBoundingClientRect().left;
                offsetY = e.clientY - panel.getBoundingClientRect().top;
                panel.style.cursor = "grabbing";
            });
        
            document.addEventListener("mousemove", (e) => {
                if (!isDragging) return;
                panel.style.left = `${e.clientX - offsetX}px`;
                panel.style.top = `${e.clientY - offsetY}px`;
                panel.style.right = "auto"; 
                panel.style.bottom = "auto";
            });
        
            document.addEventListener("mouseup", () => {
                isDragging = false;
                panel.style.cursor = "grab";
            });
        });
    </script>

</body>
</html>
